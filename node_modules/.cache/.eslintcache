[{"/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/index.js":"1","/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/App.js":"2","/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/data/store.js":"3","/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/constants.js":"4","/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/data/moviesSlice.js":"5","/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/data/watchLaterSlice.js":"6","/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/data/starredSlice.js":"7","/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/components/Header.jsx":"8","/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/components/Movies.jsx":"9","/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/components/Starred.jsx":"10","/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/components/YoutubePlayer.jsx":"11","/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/components/WatchLater.jsx":"12","/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/components/Movie.jsx":"13","/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/components/ModalVideo.jsx":"14"},{"size":469,"mtime":1675948461961,"results":"15","hashOfConfig":"16"},{"size":5521,"mtime":1676153161272,"results":"17","hashOfConfig":"16"},{"size":379,"mtime":1675948461960,"results":"18","hashOfConfig":"16"},{"size":418,"mtime":1676074513385,"results":"19","hashOfConfig":"16"},{"size":798,"mtime":1676153535749,"results":"20","hashOfConfig":"16"},{"size":638,"mtime":1676127084006,"results":"21","hashOfConfig":"16"},{"size":627,"mtime":1675948461960,"results":"22","hashOfConfig":"16"},{"size":1404,"mtime":1675948461959,"results":"23","hashOfConfig":"16"},{"size":574,"mtime":1676147492433,"results":"24","hashOfConfig":"16"},{"size":1280,"mtime":1675984772314,"results":"25","hashOfConfig":"16"},{"size":279,"mtime":1675948461960,"results":"26","hashOfConfig":"16"},{"size":1339,"mtime":1676153987574,"results":"27","hashOfConfig":"16"},{"size":4175,"mtime":1676153271374,"results":"28","hashOfConfig":"16"},{"size":1579,"mtime":1676130385017,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","suppressedMessages":"32","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"33"},"131o394",{"filePath":"34","messages":"35","suppressedMessages":"36","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37","usedDeprecatedRules":"33"},{"filePath":"38","messages":"39","suppressedMessages":"40","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"33"},{"filePath":"41","messages":"42","suppressedMessages":"43","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"33"},{"filePath":"44","messages":"45","suppressedMessages":"46","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"33"},{"filePath":"47","messages":"48","suppressedMessages":"49","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"33"},{"filePath":"50","messages":"51","suppressedMessages":"52","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"33"},{"filePath":"53","messages":"54","suppressedMessages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"33"},{"filePath":"56","messages":"57","suppressedMessages":"58","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"33"},{"filePath":"59","messages":"60","suppressedMessages":"61","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"33"},{"filePath":"62","messages":"63","suppressedMessages":"64","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"33"},{"filePath":"65","messages":"66","suppressedMessages":"67","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"68","messages":"69","suppressedMessages":"70","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"33"},{"filePath":"71","messages":"72","suppressedMessages":"73","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"33"},"/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/index.js",[],[],[],"/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/App.js",["74","75"],[],"import { useEffect, useState } from 'react';\nimport {\n  Routes,\n  Route,\n  createSearchParams,\n  useSearchParams,\n  useNavigate,\n} from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport 'reactjs-popup/dist/index.css';\nimport { fetchMovies } from './data/moviesSlice';\nimport {\n  ENDPOINT_SEARCH,\n  ENDPOINT_DISCOVER,\n  ENDPOINT,\n  API_KEY,\n} from './constants';\nimport Header from './components/Header';\nimport Movies from './components/Movies';\nimport Starred from './components/Starred';\nimport WatchLater from './components/WatchLater';\n\nimport ModalVideo from './components/ModalVideo';\nimport './app.scss';\n\nconst App = () => {\n  const state = useSelector((state) => state);\n  const { movies } = state;\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [videoKey, setVideoKey] = useState();\n  const [isOpen, setOpen] = useState(false);\n  const [page, setPage] = useState(1);\n  const searchQuery = searchParams.get('search');\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  let loading = false;\n\n  // This function is used to fetch movies from the API based on a\n  // search query. If the query is empty, the function fetches all\n  // movies from the API.\n  const getSearchResults = (query) => {\n    if (query !== '') {\n      dispatch(fetchMovies(`${ENDPOINT_SEARCH}&query=` + query));\n      setSearchParams(createSearchParams({ search: query }));\n    } else {\n      dispatch(fetchMovies(ENDPOINT_DISCOVER));\n      setSearchParams();\n    }\n  };\n\n  // This function is used to search for movies by query string\n  // query: the search term\n  const searchMovies = (query) => {\n    navigate('/');\n    getSearchResults(query);\n  };\n\n  // This function gets all movies from the database.\n  // It uses the database object, which is a global variable.\n  // This function is called by the server when the user navigates to /movies.\n  // It returns an array of movie objects.\n  const getMovies = () => {\n    if (searchQuery) {\n      dispatch(fetchMovies(`${ENDPOINT_SEARCH}&query=` + searchQuery));\n    } else {\n      if (!loading) {\n        loading = true;\n        dispatch(fetchMovies(ENDPOINT_DISCOVER));\n        setPage(page + 1);\n        setTimeout(() => {\n          loading = false;\n        }, 500);\n      }\n    }\n  };\n\n  // Get more movies from the API\n  // We are getting the next page of movies, so the page number is increased by 1\n  // The page number is passed in as an argument\n  const getMoreMovies = (page: number) => {\n    dispatch(fetchMovies(`${ENDPOINT_DISCOVER}'&page=` + page));\n  };\n\n  // This function takes a movie object and returns a function that takes a function\n  // as an argument. The function that is returned takes the function that was passed\n  // in as an argument and executes it.\n  const viewTrailer = (movie) => {\n    getMovie(movie.id);\n    document.getElementsByTagName('body')[0].style.overflow = 'hidden';\n    setOpen(true);\n  };\n\n  // This is a function that closes a modal\n  // The modal is used to display a popup with some information\n  // The function takes no parameters\n  // It sets the open state to false\n  const closeModal = () => {\n    setOpen(false);\n    document.getElementsByTagName('body')[0].style.overflow = 'auto';\n  };\n\n  // This function takes a movie ID and returns a promise containing the movie if it exists.\n  // The movie is retrieved from the database.\n  // If the movie does not exist, the promise will resolve to null.\n  const getMovie = async (id) => {\n    const URL = `${ENDPOINT}/movie/${id}?api_key=${API_KEY}&append_to_response=videos`;\n\n    setVideoKey(null);\n    const videoData = await fetch(URL).then((response) => response.json());\n\n    if (videoData.videos && videoData.videos.results.length) {\n      const trailer = videoData.videos.results.find(\n        (vid) => vid.type === 'Trailer'\n      );\n      setVideoKey(trailer ? trailer.key : videoData.videos.results[0].key);\n    }\n  };\n\n  // This function is called on scroll, and updates the\n  // scroll position in the store.\n  const onScroll = () => {\n    const scrollTop = document.documentElement.scrollTop;\n    const scrollHeight = document.documentElement.scrollHeight;\n    const clientHeight = document.documentElement.clientHeight;\n\n    if (scrollTop + clientHeight + 1 >= scrollHeight) {\n      setPage(page + 1);\n      getMoreMovies(page);\n    }\n  };\n\n  useEffect(() => {\n    window.addEventListener('scroll', onScroll);\n    return () => window.removeEventListener('scroll', onScroll);\n  }, [page]);\n\n  useEffect(() => {\n    getMovies();\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <Header\n        searchMovies={searchMovies}\n        searchParams={searchParams}\n        setSearchParams={setSearchParams}\n      />\n\n      <div className=\"container\">\n        {isOpen && <ModalVideo videoKey={videoKey} closeModal={closeModal} />}\n\n        <Routes>\n          <Route\n            path=\"/\"\n            element={\n              <div className=\"movies-container\">\n                <Movies movies={movies} viewTrailer={viewTrailer} />\n              </div>\n            }\n          />\n          <Route\n            path=\"/starred\"\n            element={<Starred viewTrailer={viewTrailer} />}\n          />\n          <Route\n            path=\"/watch-later\"\n            element={<WatchLater viewTrailer={viewTrailer} />}\n          />\n          <Route\n            path=\"*\"\n            element={<h1 className=\"not-found\">Page Not Found</h1>}\n          />\n        </Routes>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/data/store.js",[],[],"/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/constants.js",[],[],"/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/data/moviesSlice.js",[],[],"/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/data/watchLaterSlice.js",[],[],"/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/data/starredSlice.js",[],[],"/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/components/Header.jsx",[],[],"/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/components/Movies.jsx",[],[],"/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/components/Starred.jsx",[],[],"/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/components/YoutubePlayer.jsx",[],[],"/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/components/WatchLater.jsx",[],[],"/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/components/Movie.jsx",[],[],"/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/components/ModalVideo.jsx",[],[],{"ruleId":"76","severity":1,"message":"77","line":135,"column":6,"nodeType":"78","endLine":135,"endColumn":12,"suggestions":"79"},{"ruleId":"76","severity":1,"message":"80","line":139,"column":6,"nodeType":"78","endLine":139,"endColumn":8,"suggestions":"81"},"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'onScroll'. Either include it or remove the dependency array.","ArrayExpression",["82"],"React Hook useEffect has a missing dependency: 'getMovies'. Either include it or remove the dependency array.",["83"],{"desc":"84","fix":"85"},{"desc":"86","fix":"87"},"Update the dependencies array to be: [onScroll, page]",{"range":"88","text":"89"},"Update the dependencies array to be: [getMovies]",{"range":"90","text":"91"},[4498,4504],"[onScroll, page]",[4550,4552],"[getMovies]"]