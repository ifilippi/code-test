{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nexport const fetchMovies = createAsyncThunk('fetch-movies', async apiUrl => {\n  const response = await fetch(apiUrl);\n  return response.json();\n});\nconst moviesSlice = createSlice({\n  name: 'movies',\n  initialState: {\n    movies: [],\n    fetchStatus: ''\n  },\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(fetchMovies.fulfilled, (state, action) => {\n      if (state.fetchStatus !== 'loading') {\n        console.log('action.payload', action.payload);\n        let results = [...state.movies];\n        state.movies.length > 0 ? results = [...results, ...action.payload.results] : results = action.payload.results;\n        state.movies = results;\n        console.log('state.movies', state.movies);\n        state.fetchStatus = 'success';\n      }\n    }).addCase(fetchMovies.pending, state => {\n      console.log('fetchMovies.pending');\n      state.fetchStatus = 'loading';\n    }).addCase(fetchMovies.rejected, state => {\n      state.fetchStatus = 'error';\n    });\n  }\n});\nexport default moviesSlice;","map":{"version":3,"names":["createAsyncThunk","createSlice","fetchMovies","apiUrl","response","fetch","json","moviesSlice","name","initialState","movies","fetchStatus","reducers","extraReducers","builder","addCase","fulfilled","state","action","console","log","payload","results","length","pending","rejected"],"sources":["/Users/ignaciofilippi/Documents/test/test-leo/coding-assignment/src/data/moviesSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\n\nexport const fetchMovies = createAsyncThunk('fetch-movies', async (apiUrl) => {\n  const response = await fetch(apiUrl);\n  return response.json();\n});\n\nconst moviesSlice = createSlice({\n  name: 'movies',\n  initialState: {\n    movies: [],\n    fetchStatus: '',\n  },\n  reducers: {},\n  extraReducers: (builder) => {\n    builder\n      .addCase(fetchMovies.fulfilled, (state, action) => {\n        if (state.fetchStatus !== 'loading') {\n          console.log('action.payload', action.payload);\n          let results = [...state.movies];\n          state.movies.length > 0\n            ? (results = [...results, ...action.payload.results])\n            : (results = action.payload.results);\n          state.movies = results;\n\n          console.log('state.movies', state.movies);\n          state.fetchStatus = 'success';\n        }\n      })\n      .addCase(fetchMovies.pending, (state) => {\n        console.log('fetchMovies.pending');\n        state.fetchStatus = 'loading';\n      })\n      .addCase(fetchMovies.rejected, (state) => {\n        state.fetchStatus = 'error';\n      });\n  },\n});\n\nexport default moviesSlice;\n"],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,WAAW,QAAQ,kBAAkB;AAEhE,OAAO,MAAMC,WAAW,GAAGF,gBAAgB,CAAC,cAAc,EAAE,MAAOG,MAAM,IAAK;EAC5E,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACF,MAAM,CAAC;EACpC,OAAOC,QAAQ,CAACE,IAAI,EAAE;AACxB,CAAC,CAAC;AAEF,MAAMC,WAAW,GAAGN,WAAW,CAAC;EAC9BO,IAAI,EAAE,QAAQ;EACdC,YAAY,EAAE;IACZC,MAAM,EAAE,EAAE;IACVC,WAAW,EAAE;EACf,CAAC;EACDC,QAAQ,EAAE,CAAC,CAAC;EACZC,aAAa,EAAGC,OAAO,IAAK;IAC1BA,OAAO,CACJC,OAAO,CAACb,WAAW,CAACc,SAAS,EAAE,CAACC,KAAK,EAAEC,MAAM,KAAK;MACjD,IAAID,KAAK,CAACN,WAAW,KAAK,SAAS,EAAE;QACnCQ,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEF,MAAM,CAACG,OAAO,CAAC;QAC7C,IAAIC,OAAO,GAAG,CAAC,GAAGL,KAAK,CAACP,MAAM,CAAC;QAC/BO,KAAK,CAACP,MAAM,CAACa,MAAM,GAAG,CAAC,GAClBD,OAAO,GAAG,CAAC,GAAGA,OAAO,EAAE,GAAGJ,MAAM,CAACG,OAAO,CAACC,OAAO,CAAC,GACjDA,OAAO,GAAGJ,MAAM,CAACG,OAAO,CAACC,OAAQ;QACtCL,KAAK,CAACP,MAAM,GAAGY,OAAO;QAEtBH,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEH,KAAK,CAACP,MAAM,CAAC;QACzCO,KAAK,CAACN,WAAW,GAAG,SAAS;MAC/B;IACF,CAAC,CAAC,CACDI,OAAO,CAACb,WAAW,CAACsB,OAAO,EAAGP,KAAK,IAAK;MACvCE,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;MAClCH,KAAK,CAACN,WAAW,GAAG,SAAS;IAC/B,CAAC,CAAC,CACDI,OAAO,CAACb,WAAW,CAACuB,QAAQ,EAAGR,KAAK,IAAK;MACxCA,KAAK,CAACN,WAAW,GAAG,OAAO;IAC7B,CAAC,CAAC;EACN;AACF,CAAC,CAAC;AAEF,eAAeJ,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}